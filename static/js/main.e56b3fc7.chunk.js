(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a.p+"static/media/preloader.7e2490c6.gif"},43:function(e,t,a){e.exports=a(82)},48:function(e,t,a){},50:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),c=a.n(o),s=(a(48),a(9)),i=a(10),l=a(13),u=a(11),m=a(12),d=(a(50),a(84)),h=a(87),E=a(86),f=a(83),p=a(2),b=a(8),v=a.n(b),g=function(e){e?v.a.defaults.headers.common["x-auth"]=e:delete v.a.defaults.headers.common["x-auth"]},O=function(e){return{type:"SET_ERROR",error_text:e}},S=function(e){return{type:"SET_CURRENT_USER",uid:e}},N=function(){return{type:"REMOVE_CURRENT_USER"}},T=Object(p.b)(function(e){return{isAuthenticated:!!e.auth.uid}},function(e){return{logoutUser:function(){return e(function(e){e({type:"SET_LOADING_TRUE"}),v.a.delete("https://calm-peak-63612.herokuapp.com/users/me/token").then(function(t){localStorage.removeItem("todoToken"),g(!1),e(N()),e({type:"SET_LOADING_FALSE"})}).catch(function(e){"Network Error"===e.message&&alert("No Internet Connection")})})}}})(function(e){var t=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{to:"/signup",className:"nav-link"},"Sign Up"))),a=r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{to:"/",className:"nav-link",onClick:function(){e.logoutUser()}},"Logout")));return r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark mb-5"},r.a.createElement("div",{className:"container"},r.a.createElement(f.a,{to:"/",className:"navbar-brand"},"Todo"),e.isAuthenticated?a:t))}),_=a(5),y=a(18),x=a.n(y),j=a(25),w=a.n(j),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleEmailChange=a.handleEmailChange.bind(Object(_.a)(Object(_.a)(a))),a.handlePasswordChange=a.handlePasswordChange.bind(Object(_.a)(Object(_.a)(a))),a.onFormSubmit=a.onFormSubmit.bind(Object(_.a)(Object(_.a)(a))),a.state={email:"",password:"",errors:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleEmailChange",value:function(e){var t=e.target.value;this.setState(function(){return{email:t}})}},{key:"handlePasswordChange",value:function(e){var t=e.target.value;this.setState(function(){return{password:t}})}},{key:"onFormSubmit",value:function(e){e.preventDefault(),this.state.email.trim()?w()(this.state.email)?this.state.password.trim()?this.state.password.length<6?this.setState(function(){return{errors:{password:"Password Must Be Greater Then 6 Characters."}}}):this.props.onSubmit({email:this.state.email,password:this.state.password}):this.setState(function(){return{errors:{password:"Please Enter Password"}}}):this.setState(function(){return{errors:{email:"Please Enter Valid Email"}}}):this.setState(function(){return{errors:{email:"Please Enter Email"}}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Email",className:x()("form-control",{"is-invalid":this.state.errors.email}),value:this.state.email,onChange:this.handleEmailChange,onKeyUp:function(t){var a=t.target.value;w()(a)?e.setState(function(){return{errors:{}}}):e.setState(function(){return{errors:{email:"Please Enter Valid Email"}}})}}),r.a.createElement("div",{className:"invalid-feedback"},r.a.createElement("small",{className:"text-danger"},this.state.errors.email))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Password",className:x()("form-control",{"is-invalid":this.state.errors.password}),value:this.state.password,onChange:this.handlePasswordChange}),r.a.createElement("div",{className:"invalid-feedback"},r.a.createElement("small",{className:"text-danger"},this.state.errors.password))),r.a.createElement("button",{className:"btn btn-primary"},"Submit")))}}]),t}(r.a.Component),R=Object(p.b)(function(e){return{error:e.error}})(function(e){return r.a.createElement("div",{className:"alert alert-danger"},e.error.error_text)}),k=Object(p.b)(function(e){return{hasErrors:!!e.error.error_text}},function(e){return{loginUser:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){v.a.post("https://calm-peak-63612.herokuapp.com/users/login",e).then(function(e){t({type:"SET_NO_ERROR"});var a=e.headers["x-auth"];localStorage.setItem("todoToken",a),g(a),t(S(e.data._id))}).catch(function(e){var a=e.message;"Request failed with status code 400"===a?(t(O("Email/Password Is Incorrect")),setTimeout(function(){t({type:"SET_NO_ERROR"})},5e3)):"Network Error"===a&&alert("No Internet Connection")})}}(t))}}})(function(e){return r.a.createElement("div",{className:"container"},e.hasErrors&&r.a.createElement(R,null),r.a.createElement("div",{className:"card card-body"},r.a.createElement("h4",{className:"card-title"},"Login"),r.a.createElement(C,{onSubmit:function(t){e.loginUser(t)}})))}),A=Object(p.b)(function(e){return{hasErrors:!!e.error.error_text}},function(e){return{registerUser:function(t){return e(function(e){return function(t){v.a.post("https://calm-peak-63612.herokuapp.com/users",e).then(function(e){var a=e.headers["x-auth"];localStorage.setItem("todoToken",a),g(a),t(S(e.data._id))}).catch(function(e){var a=e.message;console.log(a),"Request failed with status code 400"===a?(t(O("User Is Already Registered With This Email")),setTimeout(function(){t({type:"SET_NO_ERROR"})},5e3)):"Network Error"===a&&alert("No Internet Connection")})}}(t))}}})(function(e){return r.a.createElement("div",{className:"container"},e.hasErrors&&r.a.createElement(R,null),r.a.createElement("div",{className:"card card-body"},r.a.createElement("h4",{className:"card-title"},"Sign Up"),r.a.createElement(C,{onSubmit:function(t){e.registerUser(t)}})))}),L=function(){return r.a.createElement("div",{className:"container text-center d-flex flex-column justify-content-center landing"},r.a.createElement("h1",null,"Welcome To Todo App"),r.a.createElement("p",null,"Created By Abhishek Baghel"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(f.a,{to:"/login",className:"btn btn-primary mr-1"},"Login"),r.a.createElement(f.a,{to:"/signup",className:"btn btn-danger ml-1"},"Sign Up")))},D=function(e){return{type:"REMOVE_TODO",_id:e}},I=function(e){return{type:"ADD_TODO",todo:e}},U=function(){return{type:"SET_TODOS",todos:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},B=a(38),F=a.n(B),P=Object(p.b)(void 0,function(e){return{startDeleteTodo:function(t){return e(function(e){return function(t){t({type:"SET_LOADING_TRUE"}),v.a.delete("https://calm-peak-63612.herokuapp.com/todos/".concat(e),{id:e}).then(function(e){t(D(e.data.todo._id)),t({type:"SET_LOADING_FALSE"})}).catch(function(e){console.log(e)})}}(t))}}})(function(e){return r.a.createElement("div",{className:"card mb-1"},r.a.createElement("div",{className:"card-body d-flex justify-content-between"},r.a.createElement("div",null,e.todo.text),r.a.createElement("i",{className:"btn btn-danger",onClick:function(){e.startDeleteTodo(e.todo._id)}},"X")))}),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleTextChange=a.handleTextChange.bind(Object(_.a)(Object(_.a)(a))),a.onSubmit=a.onSubmit.bind(Object(_.a)(Object(_.a)(a))),a.state={text:"",errors:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleTextChange",value:function(e){var t=e.target.value;this.setState(function(){return{text:t}})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.state.text.trim()?(this.setState(function(){return{text:""}}),this.props.onFormSubmit({text:this.state.text})):this.setState(function(){return{errors:{text:"Please Enter Todo"}}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Enter Todo.....",value:this.state.text,onChange:this.handleTextChange,className:x()("form-control",{"is-invalid":this.state.errors.text})}),r.a.createElement("div",{className:"invalid-feedback"},this.state.errors.text)),r.a.createElement("button",{className:"btn btn-primary"},"Add")))}}]),t}(r.a.Component),M=Object(p.b)(void 0,function(e){return{startAddTodo:function(t){return e(function(e){return function(t){t({type:"SET_LOADING_TRUE"}),v.a.post("https://calm-peak-63612.herokuapp.com/todos",{text:e}).then(function(e){t(I(e.data)),t({type:"SET_LOADING_FALSE"})}).catch(function(e){console.log(e)})}}(t))}}})(function(e){return r.a.createElement("div",null,r.a.createElement(G,{onFormSubmit:function(t){e.startAddTodo(t.text)}}))}),V=Object(p.b)(void 0,function(e){return{setTextFilter:function(t){return e(function(e){return{type:"SET_TEXT_FILTER",text:e}}(t))},sortByASC:function(){return e({type:"SORT_BY_ASC"})},sortByDSC:function(){return e({type:"SORT_BY_DSC"})}}})(function(e){return r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"form-group w-75"},r.a.createElement("input",{type:"text",placeholder:"Search Todo....",onChange:function(t){var a=t.target.value;e.setTextFilter(a.trim())},className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",onChange:function(t){"asc"===t.target.value?e.sortByASC():"dsc"===t.target.value&&e.sortByDSC()}},r.a.createElement("option",{value:"asc"},"A-Z"),r.a.createElement("option",{value:"dsc"},"Z-A"))))}),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadingJSX=r.a.createElement("div",{className:"preloader"},r.a.createElement("img",{src:F.a})),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.startSetTodos()}},{key:"render",value:function(){return this.props.isLoading?this.loadingJSX:r.a.createElement("div",{className:"container mx-auto w-75"},r.a.createElement("div",{className:"card card-body mb-3"},r.a.createElement(V,null)),r.a.createElement("div",{className:"card  mb-1"},r.a.createElement("div",{className:"card-header"},"Todos"),r.a.createElement("div",{className:"card-body"},this.props.todos.length>0?this.props.todos.map(function(e){return r.a.createElement(P,{todo:e,key:e._id})}):r.a.createElement("h1",null,"No Todos Found"))),r.a.createElement("div",{className:"card card-body mb-5"},r.a.createElement(M,null)))}}]),t}(r.a.Component),J=Object(p.b)(function(e){return{todos:(t=e.todos,a=e.filters,t.filter(function(e){return e.text.toLowerCase().includes(a.text.toLowerCase())}).sort(function(e,t){return"asc"===a.sortBy?e.text.toLowerCase().localeCompare(t.text.toLowerCase()):"dsc"===a.sortBy?t.text.toLowerCase().localeCompare(e.text.toLowerCase()):void 0})),isLoading:e.isLoading};var t,a},function(e){return{startSetTodos:function(){return e(function(e){e({type:"SET_LOADING_TRUE"}),v.a.get("https://calm-peak-63612.herokuapp.com/todos").then(function(t){e(U(t.data.todos)),e({type:"SET_LOADING_FALSE"})}).catch(function(e){console.log("Error: ",e)})})}}})(X),W=a(22),Y=a(85),q=Object(p.b)(function(e){return{isAuthenticated:!!e.auth.uid}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(W.a)(e,["isAuthenticated","component"]);return r.a.createElement(E.a,Object.assign({},n,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(a,e)):r.a.createElement(Y.a,{to:"/"})}}))}),Z=Object(p.b)(function(e){return{isAuthenticated:!!e.auth.uid}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(W.a)(e,["isAuthenticated","component"]);return r.a.createElement(E.a,Object.assign({},n,{component:function(e){return t?r.a.createElement(Y.a,{to:"/dashboard"}):r.a.createElement(a,e)}}))}),H=function(){return r.a.createElement("div",{className:"container mx-auto"},r.a.createElement("div",{className:"card card-body"},r.a.createElement("h2",null,"404 | Not Found ",r.a.createElement(f.a,{to:"/"},"Go Home"))))},K=function(){return r.a.createElement(d.a,{basename:"/node-react-todo-app"},r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement(h.a,null,r.a.createElement(Z,{exact:!0,path:"/",component:L}),r.a.createElement(q,{exact:!0,path:"/dashboard",component:J}),r.a.createElement(Z,{exact:!0,path:"/login",component:k}),r.a.createElement(Z,{exact:!0,path:"/signup",component:A}),r.a.createElement(E.a,{component:H}))))},$=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(78);var z=a(16),Q=a(40),ee=a(15),te={},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(ee.a)({},e,{uid:t.uid});case"REMOVE_CURRENT_USER":return{};default:return e}},ne=a(42),re=[],oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TODOS":return t.todos;case"ADD_TODO":return Object(ne.a)(e).concat([t.todo]);case"REMOVE_TODO":return e.filter(function(e){return e._id!==t._id});default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch((arguments.length>1?arguments[1]:void 0).type){case"SET_LOADING_TRUE":return!0;case"SET_LOADING_FALSE":return!1;default:return e}},se={text:"",sortBy:"asc"},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return Object(ee.a)({},e,{text:t.text});case"SORT_BY_ASC":return Object(ee.a)({},e,{sortBy:"asc"});case"SORT_BY_DSC":return Object(ee.a)({},e,{sortBy:"dsc"});default:return e}},le={},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return Object(ee.a)({},e,{error_text:t.error_text});case"SET_NO_ERROR":return{};default:return e}},me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,de=function(){return Object(z.e)(Object(z.c)({auth:ae,todos:oe,isLoading:ce,filters:ie,error:ue}),me(Object(z.a)(Q.a)))},he=a(41),Ee=a.n(he),fe=de(),pe=r.a.createElement(p.a,{store:fe},r.a.createElement($,null)),be=function(){return c.a.render(pe,document.getElementById("root"))};if(localStorage.getItem("todoToken")){g(localStorage.getItem("todoToken"));var ve=Ee()(localStorage.getItem("todoToken"));console.log(ve),fe.dispatch(S(ve._id)),be()}else fe.dispatch(N()),be();"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.e56b3fc7.chunk.js.map